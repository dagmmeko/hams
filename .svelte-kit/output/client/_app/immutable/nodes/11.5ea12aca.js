import{s as Ne,q as Ee,e as d,t as te,a as F,c,b,d as le,f,g as A,l as X,p as i,r as ee,i as se,h as a,u as G,y as L,z as Te,j as Pe,n as xe,A as Se,B as he,k as ke,D as qe,E as Be,F as Le,G as De}from"../chunks/scheduler.be341df6.js";import{e as Re}from"../chunks/each.f509b82d.js";import{g as Ce}from"../chunks/spread.8a54911c.js";import{S as Oe,i as Ve}from"../chunks/index.d2fb6592.js";import{a as we}from"../chunks/scopes.253e99ca.js";import{s as Fe}from"../chunks/index.655df6de.js";import{t as fe}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.34936dee.js";import{g as Ue}from"../chunks/navigation.e609b1a8.js";function Ae(l,e,t){const r=l.slice();return r[19]=e[t],r}function je(l){let e,t,r="Archive Role",n,u;return{c(){e=d("form"),t=d("button"),t.textContent=r,this.h()},l(o){e=c(o,"FORM",{method:!0,action:!0,class:!0});var h=b(e);t=c(h,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),X(t)!=="svelte-134r6sf"&&(t.textContent=r),h.forEach(f),this.h()},h(){i(t,"type","submit"),i(t,"class","w-full h-full"),i(e,"method","post"),i(e,"action","?/archiveRole"),i(e,"class","w-full bg-danger text-white flex justify-center rounded-md py-2")},m(o,h){se(o,e,h),a(e,t),n||(u=[L(t,"click",De(l[9])),Te(l[7].call(null,e))],n=!0)},d(o){o&&f(e),n=!1,he(u)}}}function ze(l){let e,t="Archive Role",r,n;return{c(){e=d("button"),e.textContent=t,this.h()},l(u){e=c(u,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),X(e)!=="svelte-ip0zcq"&&(e.textContent=t),this.h()},h(){i(e,"type","submit"),i(e,"class","bg-subtitle text-white rounded-md py-2 w-full")},m(u,o){se(u,e,o),r||(n=L(e,"click",De(l[14])),r=!0)},d(u){u&&f(e),r=!1,n()}}}function Ie(l){let e,t,r,n,u=l[19].replace(/_/g," ").replace(/^(.)(.*)$/,Ge)+"",o,h,g,I,T;return g=qe(l[17][0]),{c(){e=d("label"),t=d("input"),r=F(),n=d("div"),o=te(u),h=F(),this.h()},l(_){e=c(_,"LABEL",{class:!0});var y=b(e);t=c(y,"INPUT",{type:!0,name:!0}),r=A(y),n=c(y,"DIV",{class:!0});var D=b(n);o=le(D,u),D.forEach(f),h=A(y),y.forEach(f),this.h()},h(){i(t,"type","checkbox"),t.__value=l[19],G(t,t.__value),i(t,"name","scopes"),i(n,"class","text-xs flex-1"),i(e,"class","flex space-x-2"),g.p(t)},m(_,y){se(_,e,y),a(e,t),t.checked=~(l[3].scopes||[]).indexOf(t.__value),a(e,r),a(e,n),a(n,o),a(e,h),I||(T=[L(t,"input",l[15]),L(t,"change",l[16])],I=!0)},p(_,y){y&8&&(t.checked=~(_[3].scopes||[]).indexOf(t.__value))},d(_){_&&f(e),g.r(),I=!1,he(T)}}}function Me(l){let e,t,r,n,u,o,h=l[0].role.name+"",g,I,T,_,y="Edit role here. Click save when you're done.",D,C,N,H="Role",j,E,z,w,P,v="Description",M,k,ae,S,q,ne,oe,re,V,O,ie,me,ue=[{required:!0},{class:"w-full border-[1px] border-black/60 rounded-md p-2"},{name:"name"},l[2].name],J={};for(let s=0;s<ue.length;s+=1)J=Ee(J,ue[s]);let de=[{class:"w-full border-[1px] border-black/60 rounded-md p-2"},{name:"description"},l[2].description],K={};for(let s=0;s<de.length;s+=1)K=Ee(K,de[s]);function _e(s,x){return s[0].role.Employees.length?ze:je}let Q=_e(l),B=Q(l),U=Re(we),m=[];for(let s=0;s<U.length;s+=1)m[s]=Ie(Ae(l,U,s));return{c(){e=d("form"),t=d("div"),r=d("div"),n=d("div"),u=d("p"),o=d("span"),g=te(h),I=te(" Role"),T=F(),_=d("p"),_.textContent=y,D=F(),C=d("label"),N=d("span"),N.textContent=H,j=F(),E=d("input"),z=F(),w=d("label"),P=d("span"),P.textContent=v,M=F(),k=d("textarea"),ae=F(),S=d("div"),q=d("button"),ne=te("Edit Role"),oe=F(),B.c(),re=F(),V=d("div"),O=d("div");for(let s=0;s<m.length;s+=1)m[s].c();this.h()},l(s){e=c(s,"FORM",{method:!0,action:!0});var x=b(e);t=c(x,"DIV",{class:!0});var p=b(t);r=c(p,"DIV",{class:!0});var R=b(r);n=c(R,"DIV",{});var W=b(n);u=c(W,"P",{class:!0});var ce=b(u);o=c(ce,"SPAN",{class:!0});var be=b(o);g=le(be,h),be.forEach(f),I=le(ce," Role"),ce.forEach(f),T=A(W),_=c(W,"P",{class:!0,"data-svelte-h":!0}),X(_)!=="svelte-1wa79vg"&&(_.textContent=y),W.forEach(f),D=A(R),C=c(R,"LABEL",{class:!0});var Y=b(C);N=c(Y,"SPAN",{class:!0,"data-svelte-h":!0}),X(N)!=="svelte-1fu522k"&&(N.textContent=H),j=A(Y),E=c(Y,"INPUT",{class:!0,name:!0}),Y.forEach(f),z=A(R),w=c(R,"LABEL",{class:!0});var Z=b(w);P=c(Z,"SPAN",{class:!0,"data-svelte-h":!0}),X(P)!=="svelte-1qymmvq"&&(P.textContent=v),M=A(Z),k=c(Z,"TEXTAREA",{class:!0,name:!0}),b(k).forEach(f),Z.forEach(f),ae=A(R),S=c(R,"DIV",{class:!0});var $=b(S);q=c($,"BUTTON",{type:!0,class:!0});var ve=b(q);ne=le(ve,"Edit Role"),ve.forEach(f),oe=A($),B.l($),$.forEach(f),R.forEach(f),re=A(p),V=c(p,"DIV",{class:!0});var ge=b(V);O=c(ge,"DIV",{class:!0});var ye=b(O);for(let pe=0;pe<m.length;pe+=1)m[pe].l(ye);ye.forEach(f),ge.forEach(f),p.forEach(f),x.forEach(f),this.h()},h(){i(o,"class","font-bold text-primary"),i(u,"class","text-xl font-semibold"),i(_,"class","text-sm text-subtitle pt-2"),i(N,"class","text-primary font-medium"),ee(E,J),i(C,"class","grid"),i(P,"class","text-primary font-medium"),ee(k,K),i(w,"class","grid"),i(q,"type","submit"),q.disabled=l[1],i(q,"class","disabled:bg-primary/60 bg-primary text-white rounded-md py-2 w-full"),i(S,"class","flex gap-3"),i(r,"class","flex-1 grid col-span-1 gap-4 justify-items-stretch it"),i(O,"class","grid grid-cols-3 gap-3"),i(V,"class","flex-1 col-span-2"),i(t,"class","grid grid-flow-col mx-10 my-12 items-start space-x-12 bg-white rounded-xl p-8"),i(e,"method","post"),i(e,"action","?/editRole")},m(s,x){se(s,e,x),a(e,t),a(t,r),a(r,n),a(n,u),a(u,o),a(o,g),a(u,I),a(n,T),a(n,_),a(r,D),a(r,C),a(C,N),a(C,j),a(C,E),E.autofocus&&E.focus(),G(E,l[3].name),a(r,z),a(r,w),a(w,P),a(w,M),a(w,k),k.autofocus&&k.focus(),G(k,l[3].description),a(r,ae),a(r,S),a(S,q),a(q,ne),a(S,oe),B.m(S,null),a(t,re),a(t,V),a(V,O);for(let p=0;p<m.length;p+=1)m[p]&&m[p].m(O,null);ie||(me=[L(E,"input",l[10]),L(E,"input",l[11]),L(k,"input",l[12]),L(k,"input",l[13]),Te(l[5].call(null,e))],ie=!0)},p(s,[x]){if(x&1&&h!==(h=s[0].role.name+"")&&Pe(g,h),ee(E,J=Ce(ue,[{required:!0},{class:"w-full border-[1px] border-black/60 rounded-md p-2"},{name:"name"},x&4&&s[2].name])),x&8&&E.value!==s[3].name&&G(E,s[3].name),ee(k,K=Ce(de,[{class:"w-full border-[1px] border-black/60 rounded-md p-2"},{name:"description"},x&4&&s[2].description])),x&8&&G(k,s[3].description),x&2&&(q.disabled=s[1]),Q!==(Q=_e(s))&&(B.d(1),B=Q(s),B&&(B.c(),B.m(S,null))),x&10){U=Re(we);let p;for(p=0;p<U.length;p+=1){const R=Ae(s,U,p);m[p]?m[p].p(R,x):(m[p]=Ie(R),m[p].c(),m[p].m(O,null))}for(;p<m.length;p+=1)m[p].d(1);m.length=U.length}},i:xe,o:xe,d(s){s&&f(e),B.d(),Se(m,s),ie=!1,he(me)}}}const Ge=(l,e,t)=>e.toUpperCase()+t.toLowerCase();function Xe(l,e,t){let r,n,{data:u}=e,{form:o}=e,h=!0;const{form:g,enhance:I,constraints:T}=Fe(u.editRoleForm);ke(l,g,v=>t(3,n=v)),ke(l,T,v=>t(2,r=v));const{form:_,enhance:y}=Fe(u.deleteRoleForm,{onSubmit:({formData:v,cancel:M})=>{window.confirm("Are you sure you want to delete this role?")||M(),v.set("deleteRoleId",u.role.id.toString())}}),D=[[]];function C(v){Be.call(this,l,v)}function N(){n.name=this.value,g.set(n)}const H=()=>t(1,h=!1);function j(){n.description=this.value,g.set(n)}const E=()=>t(1,h=!1),z=()=>fe.push("Can not delete a role with Employees in it."),w=()=>t(1,h=!1);function P(){n.scopes=Le(D[0],this.__value,this.checked),g.set(n)}return l.$$set=v=>{"data"in v&&t(0,u=v.data),"form"in v&&t(8,o=v.form)},l.$$.update=()=>{l.$$.dirty&256&&o!=null&&o.deleteRoleForm&&fe.push("Role deleted successfully"),l.$$.dirty&256&&o!=null&&o.deleteRoleForm&&Ue("/roles"),l.$$.dirty&256&&o!=null&&o.editRoleForm&&fe.push("Role edited successfully")},[u,h,r,n,g,I,T,y,o,C,N,H,j,E,z,w,P,D]}class et extends Oe{constructor(e){super(),Ve(this,e,Xe,Me,Ne,{data:0,form:8})}}export{et as component};
