import{s as ie,q as $,e as f,a as A,c as m,b as C,l as S,g as D,f as b,p as _,r as O,i as oe,h as l,u as q,y as J,z as de,n as ee,A as ce,B as ue,k as te,D as pe,t as fe,d as me,F as _e}from"../chunks/scheduler.be341df6.js";import{e as ae}from"../chunks/each.f509b82d.js";import{g as se}from"../chunks/spread.8a54911c.js";import{S as he,i as ve}from"../chunks/index.d2fb6592.js";import{g as ge}from"../chunks/navigation.e609b1a8.js";import{a as le}from"../chunks/scopes.253e99ca.js";import{s as be}from"../chunks/index.655df6de.js";import{t as xe}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.34936dee.js";function ne(s,a,e){const n=s.slice();return n[11]=a[e],n}function re(s){let a,e,n,r,k=s[11].replace(/_/g," ").replace(/^(.)(.*)$/,Ee)+"",u,d,v,R,w;return v=pe(s[10][0]),{c(){a=f("label"),e=f("input"),n=A(),r=f("div"),u=fe(k),d=A(),this.h()},l(i){a=m(i,"LABEL",{class:!0});var h=C(a);e=m(h,"INPUT",{type:!0,name:!0}),n=D(h),r=m(h,"DIV",{class:!0});var g=C(r);u=me(g,k),g.forEach(b),d=D(h),h.forEach(b),this.h()},h(){_(e,"type","checkbox"),e.__value=s[11],q(e,e.__value),_(e,"name","scopes"),_(r,"class","text-xs flex-1"),_(a,"class","flex space-x-2"),v.p(e)},m(i,h){oe(i,a,h),l(a,e),e.checked=~(s[1].scopes||[]).indexOf(e.__value),l(a,n),l(a,r),l(r,u),l(a,d),R||(w=J(e,"change",s[9]),R=!0)},p(i,h){h&2&&(e.checked=~(i[1].scopes||[]).indexOf(e.__value))},d(i){i&&b(a),v.r(),R=!1,w()}}}function ye(s){let a,e,n,r,k='<p class="text-xl font-semibold">New Role</p> <p class="text-sm text-subtitle pt-2">Register new role here. Click save when you&#39;re done.</p>',u,d,v,R="Role",w,i,h,g,p,K="Description",U,x,M,L,Q="Create Role",j,T,I,z,W,H=[{required:!0},{class:"w-full border-[1px] border-black/60 rounded-md p-2"},{name:"name"},s[0].name],N={};for(let t=0;t<H.length;t+=1)N=$(N,H[t]);let X=[{class:"w-full border-[1px] border-black/60 rounded-md p-2"},{name:"description"},s[0].description],V={};for(let t=0;t<X.length;t+=1)V=$(V,X[t]);let F=ae(le),c=[];for(let t=0;t<F.length;t+=1)c[t]=re(ne(s,F,t));return{c(){a=f("form"),e=f("div"),n=f("div"),r=f("div"),r.innerHTML=k,u=A(),d=f("label"),v=f("span"),v.textContent=R,w=A(),i=f("input"),h=A(),g=f("label"),p=f("span"),p.textContent=K,U=A(),x=f("textarea"),M=A(),L=f("button"),L.textContent=Q,j=A(),T=f("div"),I=f("div");for(let t=0;t<c.length;t+=1)c[t].c();this.h()},l(t){a=m(t,"FORM",{method:!0,action:!0});var y=C(a);e=m(y,"DIV",{class:!0});var o=C(e);n=m(o,"DIV",{class:!0});var E=C(n);r=m(E,"DIV",{"data-svelte-h":!0}),S(r)!=="svelte-1ijdua7"&&(r.innerHTML=k),u=D(E),d=m(E,"LABEL",{class:!0});var B=C(d);v=m(B,"SPAN",{class:!0,"data-svelte-h":!0}),S(v)!=="svelte-1fu522k"&&(v.textContent=R),w=D(B),i=m(B,"INPUT",{class:!0,name:!0}),B.forEach(b),h=D(E),g=m(E,"LABEL",{class:!0});var P=C(g);p=m(P,"SPAN",{class:!0,"data-svelte-h":!0}),S(p)!=="svelte-1qymmvq"&&(p.textContent=K),U=D(P),x=m(P,"TEXTAREA",{class:!0,name:!0}),C(x).forEach(b),P.forEach(b),M=D(E),L=m(E,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),S(L)!=="svelte-tacgzg"&&(L.textContent=Q),E.forEach(b),j=D(o),T=m(o,"DIV",{class:!0});var Y=C(T);I=m(Y,"DIV",{class:!0});var Z=C(I);for(let G=0;G<c.length;G+=1)c[G].l(Z);Z.forEach(b),Y.forEach(b),o.forEach(b),y.forEach(b),this.h()},h(){_(v,"class","text-primary font-medium"),O(i,N),_(d,"class","grid"),_(p,"class","text-primary font-medium"),O(x,V),_(g,"class","grid"),_(L,"type","submit"),_(L,"class","bg-primary text-white rounded-md py-2"),_(n,"class","flex-1 grid col-span-1 gap-4 justify-items-stretch it"),_(I,"class","grid grid-cols-3 gap-3"),_(T,"class","flex-1 col-span-2"),_(e,"class","grid grid-flow-col mx-10 my-12 items-start space-x-12 bg-white rounded-xl p-8"),_(a,"method","post"),_(a,"action","?/addRole")},m(t,y){oe(t,a,y),l(a,e),l(e,n),l(n,r),l(n,u),l(n,d),l(d,v),l(d,w),l(d,i),i.autofocus&&i.focus(),q(i,s[1].name),l(n,h),l(n,g),l(g,p),l(g,U),l(g,x),x.autofocus&&x.focus(),q(x,s[1].description),l(n,M),l(n,L),l(e,j),l(e,T),l(T,I);for(let o=0;o<c.length;o+=1)c[o]&&c[o].m(I,null);z||(W=[J(i,"input",s[7]),J(x,"input",s[8]),de(s[3].call(null,a))],z=!0)},p(t,[y]){if(O(i,N=se(H,[{required:!0},{class:"w-full border-[1px] border-black/60 rounded-md p-2"},{name:"name"},y&1&&t[0].name])),y&2&&i.value!==t[1].name&&q(i,t[1].name),O(x,V=se(X,[{class:"w-full border-[1px] border-black/60 rounded-md p-2"},{name:"description"},y&1&&t[0].description])),y&2&&q(x,t[1].description),y&2){F=ae(le);let o;for(o=0;o<F.length;o+=1){const E=ne(t,F,o);c[o]?c[o].p(E,y):(c[o]=re(E),c[o].c(),c[o].m(I,null))}for(;o<c.length;o+=1)c[o].d(1);c.length=F.length}},i:ee,o:ee,d(t){t&&b(a),ce(c,t),z=!1,ue(W)}}}const Ee=(s,a,e)=>a.toUpperCase()+e.toLowerCase();function Ce(s,a,e){let n,r,{data:k}=a,{form:u}=a;const{form:d,enhance:v,constraints:R}=be(k.addRoleForm);te(s,d,p=>e(1,r=p)),te(s,R,p=>e(0,n=p));const w=[[]];function i(){r.name=this.value,d.set(r)}function h(){r.description=this.value,d.set(r)}function g(){r.scopes=_e(w[0],this.__value,this.checked),d.set(r)}return s.$$set=p=>{"data"in p&&e(5,k=p.data),"form"in p&&e(6,u=p.form)},s.$$.update=()=>{s.$$.dirty&64&&u!=null&&u.addRole&&ge("/roles"),s.$$.dirty&64&&u!=null&&u.addRole&&xe.push("Role created successfully")},[n,r,d,v,R,k,u,i,h,g,w]}class Fe extends he{constructor(a){super(),ve(this,a,Ce,ye,ie,{data:5,form:6})}}export{Fe as component};
