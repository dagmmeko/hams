import{s as X,e as h,c as p,b as _,f,i as $,p as m,h as u,y as M,G as Z,z as oe,B as se,a as T,t as J,l as K,g as F,d as Q,j as ae,k as ne}from"../chunks/scheduler.be341df6.js";import{S as ee,i as te,g as ce,d as R,b as ie,t as D,c as O,a as U,m as Y,e as L}from"../chunks/index.d2fb6592.js";import{g as W}from"../chunks/navigation.e609b1a8.js";import{S as de}from"../chunks/SvelteTable.a6863e2e.js";import{d as ue}from"../chunks/dayjs.min.c931d499.js";import{p as me}from"../chunks/stores.f92608b4.js";import{D as re}from"../chunks/delete.svg.6dcef649.js";import{t as le}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.34936dee.js";import"../chunks/paths.17cc3ada.js";import{s as fe}from"../chunks/index.655df6de.js";function he(c){let t,e,r,a,i,o;return r=new re({props:{class:"text-danger"}}),{c(){t=h("form"),e=h("button"),O(r.$$.fragment),this.h()},l(l){t=p(l,"FORM",{method:!0,action:!0});var n=_(t);e=p(n,"BUTTON",{});var d=_(e);U(r.$$.fragment,d),d.forEach(f),n.forEach(f),this.h()},h(){m(t,"method","post"),m(t,"action","?/archiveRole")},m(l,n){$(l,t,n),u(t,e),Y(r,e,null),a=!0,i||(o=[M(e,"click",Z(_e)),oe(c[1].call(null,t))],i=!0)},i(l){a||(D(r.$$.fragment,l),a=!0)},o(l){R(r.$$.fragment,l),a=!1},d(l){l&&f(t),L(r),i=!1,se(o)}}}function pe(c){let t,e,r,a,i;return e=new re({props:{class:"text-subtitle"}}),{c(){t=h("button"),O(e.$$.fragment)},l(o){t=p(o,"BUTTON",{});var l=_(t);U(e.$$.fragment,l),l.forEach(f)},m(o,l){$(o,t,l),Y(e,t,null),r=!0,a||(i=M(t,"click",Z(c[3])),a=!0)},i(o){r||(D(e.$$.fragment,o),r=!0)},o(o){R(e.$$.fragment,o),r=!1},d(o){o&&f(t),L(e),a=!1,i()}}}function be(c){let t,e,r,a;const i=[pe,he],o=[];function l(n,d){return n[0].Employees.length?0:1}return e=l(c),r=o[e]=i[e](c),{c(){t=h("div"),r.c()},l(n){t=p(n,"DIV",{});var d=_(t);r.l(d),d.forEach(f)},m(n,d){$(n,t,d),o[e].m(t,null),a=!0},p(n,[d]){let s=e;e=l(n),e!==s&&(ce(),R(o[s],1,1,()=>{o[s]=null}),ie(),r=o[e],r||(r=o[e]=i[e](n),r.c()),D(r,1),r.m(t,null))},i(n){a||(D(r),a=!0)},o(n){R(r),a=!1},d(n){n&&f(t),o[e].d()}}}const _e=()=>{};function ge(c,t,e){let{row:r}=t,{data:a}=t;const{enhance:i}=fe(a.deleteRoleForm,{onSubmit:({formData:l,cancel:n})=>{window.confirm("Are you sure you want to delete this role?")||n(),l.set("deleteRoleId",r.id)}}),o=()=>le.push("Can not delete a role with Employees in it.");return c.$$set=l=>{"row"in l&&e(0,r=l.row),"data"in l&&e(2,a=l.data)},[r,i,a,o]}class xe extends ee{constructor(t){super(),te(this,t,ge,be,X,{row:0,data:2})}}function ye(c){let t,e,r,a,i,o="Roles",l,n,d=c[0].roles.length+"",s,B,A,v,q="New Role",N,k,E,x,P,y,C,V,z;return y=new de({props:{classNameTable:"rolesTable",columns:c[1],rows:c[2]}}),y.$on("clickCell",c[6]),{c(){t=h("div"),e=h("div"),r=h("div"),a=h("div"),i=h("p"),i.textContent=o,l=T(),n=h("p"),s=J(d),B=J(" Roles"),A=T(),v=h("a"),v.textContent=q,N=T(),k=h("div"),E=h("label"),x=h("input"),P=T(),O(y.$$.fragment),this.h()},l(b){t=p(b,"DIV",{});var w=_(t);e=p(w,"DIV",{class:!0});var g=_(e);r=p(g,"DIV",{class:!0});var I=_(r);a=p(I,"DIV",{class:!0});var S=_(a);i=p(S,"P",{class:!0,"data-svelte-h":!0}),K(i)!=="svelte-1benmd3"&&(i.textContent=o),l=F(S),n=p(S,"P",{class:!0});var j=_(n);s=Q(j,d),B=Q(j," Roles"),j.forEach(f),S.forEach(f),A=F(I),v=p(I,"A",{href:!0,class:!0,"data-svelte-h":!0}),K(v)!=="svelte-568voq"&&(v.textContent=q),I.forEach(f),N=F(g),k=p(g,"DIV",{class:!0});var G=_(k);E=p(G,"LABEL",{class:!0});var H=_(E);x=p(H,"INPUT",{class:!0,type:!0,id:!0,name:!0,placeholder:!0}),H.forEach(f),G.forEach(f),P=F(g),U(y.$$.fragment,g),g.forEach(f),w.forEach(f),this.h()},h(){m(i,"class","text-xl font-medium"),m(n,"class","bg-[#F9F5FF] text-xs font-medium rounded-xl py-2 px-3"),m(a,"class","flex items-center space-x-4"),m(v,"href","/roles/add-role"),m(v,"class","bg-primary text-white text-sm rounded-md py-2 px-6"),m(r,"class","flex justify-between p-6"),m(x,"class","w-[420px] border-[1px] border-black/60 rounded-md p-2"),m(x,"type","search"),m(x,"id","search"),m(x,"name","search"),m(x,"placeholder","Search"),m(E,"class","grid"),m(k,"class","bg-ghost/60 p-6 flex justify-between border-b-2 border-ghost"),m(e,"class","mx-10 my-12 bg-white rounded-sm shadow-lg border-[1px] border-black/20")},m(b,w){$(b,t,w),u(t,e),u(e,r),u(r,a),u(a,i),u(a,l),u(a,n),u(n,s),u(n,B),u(r,A),u(r,v),u(e,N),u(e,k),u(k,E),u(E,x),u(e,P),Y(y,e,null),C=!0,V||(z=M(x,"change",c[5]),V=!0)},p(b,[w]){(!C||w&1)&&d!==(d=b[0].roles.length+"")&&ae(s,d);const g={};w&2&&(g.columns=b[1]),w&4&&(g.rows=b[2]),y.$set(g)},i(b){C||(D(y.$$.fragment,b),C=!0)},o(b){R(y.$$.fragment,b),C=!1},d(b){b&&f(t),L(y),V=!1,z()}}}function Be(c,t,e){let r,a,i;ne(c,me,s=>e(3,i=s));let{form:o}=t,{data:l}=t;const n=async s=>{const B=new URLSearchParams(i.url.search);B.set("search",s.currentTarget.value),await W(`?${B.toString()}`)},d=s=>{const B=s.detail.row.id;W(`/roles/${B}`)};return c.$$set=s=>{"form"in s&&e(4,o=s.form),"data"in s&&e(0,l=s.data)},c.$$.update=()=>{c.$$.dirty&1&&e(2,r=l.roles),c.$$.dirty&1&&e(1,a=[{key:"title",title:"Role",value:s=>(s==null?void 0:s.name)??"",headerClass:"text-left pl-2 bg-ghost/60 w-1/3 border-b-[1px] border-[#B3B4B8] text-[#141B29] font-medium text-sm h-12",class:"text-left pl-2 h-12 border-b-[1px] border-[#B3B4B8]"},{key:"noOfEmployees",title:"No. of Employees",value:s=>(s==null?void 0:s.Employees.length)??"",headerClass:"text-left pl-2 bg-ghost/60 border-b-[1px] border-[#B3B4B8] text-[#141B29] font-medium text-sm h-12",class:"text-left pl-2 h-12 border-b-[1px] border-[#B3B4B8]"},{key:"createdAt",title:"Created At",value:s=>ue(s==null?void 0:s.createdAt).format("MMM DD, YYYY")??"",headerClass:"text-left pl-2 bg-ghost/60 border-b-[1px] border-[#B3B4B8] text-[#141B29] font-medium text-sm h-12",class:"text-left pl-2 h-12 border-b-[1px] border-[#B3B4B8]"},{key:"delete",title:"",renderComponent:{component:xe,props:{data:l}},headerClass:"bg-ghost/60 border-b-[1px] border-[#B3B4B8] text-[#141B29] font-medium text-sm h-12",class:"border-b-[1px] border-[#B3B4B8]"}]),c.$$.dirty&16&&o!=null&&o.deleteRoleForm&&le.push("Role deleted successfully")},[l,a,r,i,o,n,d]}class Fe extends ee{constructor(t){super(),te(this,t,Be,ye,X,{form:4,data:0})}}export{Fe as component};
